<ion-header>

  <ion-navbar>
    <ion-title>
      All Users
    </ion-title>
  </ion-navbar>

</ion-header>

<ion-content padding>
  <ion-segment [(ngModel)]="segment" color="primary">
    <ion-segment-button value="users">
      Users
    </ion-segment-button>
    <ion-segment-button value="groups">
      Groups
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="segment">
    <ng-container *ngSwitchCase="'users'">
      <ion-item-group *ngFor="let user of users">
        <div *ngIf="user.id !== 1">
          <ion-row no-padding (click)="jump(user.id)">
            <ion-col col-3>
              <ion-item>
                <ion-avatar item-start>
                  <img src={{user.img}}>
                </ion-avatar>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-item>
                <h2>{{user.name}}</h2>
                <p>{{user.company}}</p>
                <!-- <p>{{user.Id}}</p> -->
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-item>
                <ion-checkbox *ngIf="hide" item-right color="dark" [(ngModel)]="checked[user.id]"></ion-checkbox>
              </ion-item>
            </ion-col>
          </ion-row>
        </div>
      </ion-item-group>
      <ion-row>
        <button ion-button *ngIf="hide" (click)="saveGroup()">Save Group</button>
      </ion-row>
      <ion-fab bottom right edge class="addnew" (click)="createGroup()">
        <button ion-fab mini side="top">
          <ion-icon name="add"></ion-icon>
        </button>
      </ion-fab>
    </ng-container>

    <ng-container *ngSwitchCase="'groups'">
      <ion-item-group *ngFor="let group of groups">
        <ion-item no-padding (click)="jump()">
          <ion-thumbnail item-start>
            <div class="conversation-summary-avatar conversation-summary-avatar-group" data-number-of-thumbnails="4">
              <div class="conversation-summary-avatar-group-member-wrapper"><img src={{users[group.userIds[0]-1].img}} data-user-initial="J"></div>
              <div class="conversation-summary-avatar-group-member-wrapper">
                <img *ngIf="group.userIds.length>1; else that" class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src={{users[group.userIds[1]].img}} data-user-initial="P">
                <ng-template #that>
                  <img class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src="" data-user-initial="P">
                </ng-template>
              </div>

              <div class="conversation-summary-avatar-group-member-wrapper">
                <img *ngIf="group.userIds.length>2; else that" class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src={{users[group.userIds[2]].img}} data-user-initial="B">
                <ng-template #that>
                  <img class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src="" data-user-initial="P">
                </ng-template>
              </div>

              <div class="conversation-summary-avatar-group-member-wrapper">
                <img *ngIf="group.userIds.length>3; else that" class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src={{users[group.userIds[3]].img}}
                data-user-initial="B">
                <ng-template #that>
                  <img class="conversation-summary-avatar-group-member avatar--should-fall-back-to-initial" src="" data-user-initial="P">
                </ng-template>
              </div>
            </div>
          </ion-thumbnail>
          <h2>{{group.groupName}}</h2>
          <div *ngFor="let userId of group.userIds" class="userName">
            {{users[userId].name}}
            <div *ngIf="userId !== group.userIds[group.userIds.length-1]" class="userName">,</div>
          </div>

        </ion-item>
      </ion-item-group>
    </ng-container>
  </div>

</ion-content>
