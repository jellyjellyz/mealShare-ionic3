<ion-header>

  <ion-navbar>
    <ion-title>
      My Events
    </ion-title>
  </ion-navbar>
  <ion-header>

  </ion-header>


</ion-header>


<ion-content padding>

  <ion-segment [(ngModel)]="segment" color="primary" >
    <ion-segment-button value="all">
      ALL
    </ion-segment-button>
    <ion-segment-button value="host">
      HOST
    </ion-segment-button>
    <ion-segment-button value="going">
      GOING
    </ion-segment-button>
    <ion-segment-button value="saved">
      SAVED
    </ion-segment-button>
  </ion-segment>

  <div [ngSwitch]="segment" class="eventDiv">
    <ng-container *ngSwitchCase="'all'">
      <!-- for each day there's a list -->
      <ion-list *ngFor="let schedule of schedules">
          <ion-list-header no-lines class="list_header"> {{schedule.date | date: 'fullDate'}} </ion-list-header>
        
          <!-- for each event happening in one day -->
          <ion-card *ngFor="let event of schedule.events">

              <!-- for text info per event -->
              <ion-item no-lines>
                <h2 class="event_title">
                  <ion-icon name="contact" *ngIf= "checkEventRelationshipToMe(event) == 'host'" class="hostIcon"></ion-icon> 
                  {{event.title}} 
                </h2>
                <p>{{event.start_time | date: 'shortTime'}}, {{event.restaurant.location}}</p>
              </ion-item>

              <ion-item no-lines>
                <ion-avatar item-start *ngFor="let participantId of event.coming_people_ids.slice(0,3)">
                  <img src={{getUserImgById(participantId)}} class="participant_img">
                </ion-avatar>
                <p class="moreNum" *ngIf="event.coming_people_ids.length > 3">+{{event.coming_people_ids.length - 3}}</p>

                <ng-container *ngIf= "checkEventRelationshipToMe(event) !== 'host'">
                    <button ion-button clear small class="eventCardButton" >
                        <ion-icon name="ice-cream-outline"></ion-icon>
                        <div>JOIN</div>
                    </button>
                    
                    <button ion-button clear small class="eventCardButton">
                      <ion-icon name="star-outline"></ion-icon>
                      <div>SAVE</div>
                    </button>
                </ng-container>
              </ion-item>
          </ion-card>
      </ion-list>
    </ng-container>

    <ng-container *ngSwitchCase="'host'">
      <!-- for each day there's a list -->
      <ion-list *ngFor="let schedule of schedules">
          <ion-list-header no-lines class="list_header"> {{schedule.date | date: 'fullDate'}} </ion-list-header>
        
          <!-- for each event happening in one day -->

          <ion-card *ngFor="let event of schedule.events">
            <ng-container *ngIf="checkEventRelationshipToMe(event) == segment">
              <!-- for text info per event -->
              <ion-item no-lines>
                <h2 class="event_title">
                  <ion-icon name="contact" *ngIf= "checkEventRelationshipToMe(event) == 'host'" class="hostIcon"></ion-icon> 
                  {{event.title}} 
                </h2>
                <p>{{event.start_time | date: 'shortTime'}}, {{event.restaurant.location}}</p>
              </ion-item>

              <ion-item no-lines>
                <ion-avatar item-start *ngFor="let participantId of event.coming_people_ids.slice(0,3)">
                  <img src={{getUserImgById(participantId)}} class="participant_img">
                </ion-avatar>
                <p class="moreNum" *ngIf="event.coming_people_ids.length > 3">+{{event.coming_people_ids.length - 3}}</p>

                <ng-container *ngIf= "checkEventRelationshipToMe(event) !== 'host'">
                    <button ion-button clear small class="eventCardButton" >
                        <ion-icon name="ice-cream-outline"></ion-icon>
                        <div>JOIN</div>
                    </button>
                    
                    <button ion-button clear small class="eventCardButton">
                      <ion-icon name="star-outline"></ion-icon>
                      <div>SAVE</div>
                    </button>
                </ng-container>
              </ion-item>
            </ng-container>
          </ion-card>
      </ion-list>
    </ng-container>

    <ng-container *ngSwitchCase="'going'">
        <!-- for each day there's a list -->
        <ion-list *ngFor="let schedule of schedules">
            <ion-list-header no-lines class="list_header"> {{schedule.date | date: 'fullDate'}} </ion-list-header>
          
            <!-- for each event happening in one day -->
  
            <ion-card *ngFor="let event of schedule.events">
              <ng-container *ngIf="checkEventRelationshipToMe(event) == segment">
                <!-- for text info per event -->
                <ion-item no-lines>
                  <h2 class="event_title">
                    <ion-icon name="contact" *ngIf= "checkEventRelationshipToMe(event) == 'host'" class="hostIcon"></ion-icon> 
                    {{event.title}} 
                  </h2>
                  <p>{{event.start_time | date: 'shortTime'}}, {{event.restaurant.location}}</p>
                </ion-item>
  
                <ion-item no-lines>
                  <ion-avatar item-start *ngFor="let participantId of event.coming_people_ids.slice(0,3)">
                    <img src={{getUserImgById(participantId)}} class="participant_img">
                  </ion-avatar>
                  <p class="moreNum" *ngIf="event.coming_people_ids.length > 3">+{{event.coming_people_ids.length - 3}}</p>
  
                  <ng-container *ngIf= "checkEventRelationshipToMe(event) !== 'host'">
                      <button ion-button clear small class="eventCardButton" >
                          <ion-icon name="ice-cream-outline"></ion-icon>
                          <div>JOIN</div>
                      </button>
                      
                      <button ion-button clear small class="eventCardButton">
                        <ion-icon name="star-outline"></ion-icon>
                        <div>SAVE</div>
                      </button>
                  </ng-container>
                </ion-item>
              </ng-container>
            </ion-card>
        </ion-list>
    </ng-container>

    <ng-container *ngSwitchCase="'saved'">
        <!-- for each day there's a list -->
        <ion-list *ngFor="let schedule of schedules">
            <ion-list-header no-lines class="list_header"> {{schedule.date | date: 'fullDate'}} </ion-list-header>
          
            <!-- for each event happening in one day -->
  
            <ion-card *ngFor="let event of schedule.events">
              <ng-container *ngIf="checkEventRelationshipToMe(event) == segment">
                <!-- for text info per event -->
                <ion-item no-lines>
                  <h2 class="event_title">
                    <ion-icon name="contact" *ngIf= "checkEventRelationshipToMe(event) == 'host'" class="hostIcon"></ion-icon> 
                    {{event.title}} 
                  </h2>
                  <p>{{event.start_time | date: 'shortTime'}}, {{event.restaurant.location}}</p>
                </ion-item>
  
                <ion-item no-lines>
                  <ion-avatar item-start *ngFor="let participantId of event.coming_people_ids.slice(0,3)">
                    <img src={{getUserImgById(participantId)}} class="participant_img">
                  </ion-avatar>
                  <p class="moreNum" *ngIf="event.coming_people_ids.length > 3">+{{event.coming_people_ids.length - 3}}</p>
  
                  <ng-container *ngIf= "checkEventRelationshipToMe(event) !== 'host'">
                      <button ion-button clear small class="eventCardButton" >
                          <ion-icon name="ice-cream-outline"></ion-icon>
                          <div>JOIN</div>
                      </button>
                      
                      <button ion-button clear small class="eventCardButton">
                        <ion-icon name="star-outline"></ion-icon>
                        <div>SAVE</div>
                      </button>
                  </ng-container>
                </ion-item>
              </ng-container>
            </ion-card>
        </ion-list>
    </ng-container>


  </div>





  <ion-fab bottom right edge class="addnew" (click)=createEvent()>
    <button ion-fab mini side="top">
      <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>


</ion-content>

